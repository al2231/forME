<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../assets/style.css">

    <!-- Title for font -->
    <link rel="preconnect" href="https://fonts.googleapis.com/%22%3E%22%3E">
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Serif:ital,wght@1,100&display=swap" rel="stylesheet">

    <!-- Title me font -->
    <link rel="preconnect" href="https://fonts.googleapis.com/%22%3E%22%3E">
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Blinker:wght@300&display=swap" rel="stylesheet">

    <title>Tracker</title>
</head>

<body>
    <h2 id="h2gen">TrackME</h2>
    <hr class="bchr">

    <div class="trackers">
        <div class="trackind">
            <h3 class="WT">Water tracker</h3> 
            <img class="minus" src="../assets/icons/minus.png" alt="minus">
        </div>
        <div class="check">
            <div onclick="checkIt()" id="box" class="checkbox">
                <img id="checkmark" class="checkmark" src="../assets/icons/checkmark.png" alt="mark">
            </div>
            <p id="reminder">16oz by 5PM today</p>
        </div>
    </div>

    <div class="trackers">
        <div class="trackind">
            <h3 class="AT">Add a new tracker</h3>
            <button onclick="addInputs()"><img src="plus.png" alt="plus"></button>
            <div id="input-container"></div>
        </div>
        
    </div>

    <nav class="bottom">
        <ul>
            <li> 
                <a href="index.html"><img class = "house" src="../assets/nav/bwhouse.png" alt="home" ></a>
            </li>
            <li> 
                <a href="birthcontrol.html"><img class="heartpills" src="../assets/nav/bwheart.png" alt="pills" ></a>
            </li>
            <li> 
                <a href="track.html"><img class="tracker" src="../assets/nav/note.png" alt="tracker" ></a>
            </li>
        </ul>
    </nav>
    <script>
        var checked = false;
        checkmark = document.getElementById("checkmark");
        console.log(checkmark);

        // add an onclick event listener to the checkbox
        function checkIt() {
            if (checked == false) {
                check();
            } else {
                uncheck();
                //alert("bye");
            }
        };

        function check() {
            checkmark.style.display="block";
            document.getElementById("checkmark").style.width = "13px";
            document.getElementById("checkmark").style.padding = "3px";
            document.getElementById("reminder").style.textDecoration = "line-through";

            checked = true;
        }

        // function to handle unchecking the checkbox
        function uncheck() {
            checkmark = document.getElementById("checkmark");
            checkmark.style.display = "none";
            document.getElementById("reminder").style.textDecoration = "none";
            
            checked = false;
        }

        var popup = false;

        function addInputs() {
            const inputContainer = document.getElementById("input-container");
            if(popup == false){
                // create three input fields and append them to the container
                for (let i = 1; i <= 3; i++) {
                    const input = document.createElement("input");
                    input.type = "text";
                    if (i === 1) {
                        input.placeholder = "Medication Name";
                    } else if (i === 2) {
                        input.placeholder = "[hour]:[min][AM/PM]";
                    } else {
                        input.placeholder = "Dosage(mg)";
                    }
                    inputContainer.appendChild(input);
                    popup = true;
                }

                // create a button and append it to the container
                const button = document.createElement("button");
                button.textContent = "Submit";
                button.addEventListener("click", function() {
                    const inputs = inputContainer.querySelectorAll("input");
                    const medicationName = inputs[0].value;
                    const time = inputs[1].value;
                    const dosage = inputs[2].value;
                    console.log(medicationName, time, dosage);
                    window.localStorage.setItem("name", medicationName);
                    window.localStorage.setItem("time", time);
                    window.localStorage.setItem("dosage", dosage);
                });
                inputContainer.appendChild(button);
            }
            
        }
    </script>
</body>
</html>